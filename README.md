# fasttext
## Excelファイルをダウンロード
  シェルスクリプトで一括ダウンロード（wgetを使う）

  ```
  $ ./get_doc.sh
  ```

## ExcelをCSVに変換
  Pandasを使う。
  第一引数はExcelファイルを格納したディレクトリのフルパス。
  実行したディレクトリにCSVファイルが出力される。

  ```
  $ python excel_to_csv.py /path/to/excel/files/dir/
  ```

## 災害状況、災害発生状況を分かち書きする。
  PythonでMeCabを使う。辞書はipadic-neologd。
  mecab-python3などインストールしておく。

  第一引数はCSVファイルを格納したディレクトリのフルパス。
  第二引数は分かち書きした結果を保存するテキストファイル。

  ```
  $ python tokenize_csv.py /path/to/csv/files/dir/ wakati.txt
  ```
## fasttextでモデルを作成する。
  fasttextをインストールする。
 
  ```
  $ git clone https://github.com/facebookresearch/fastText.git
  $ cd fastText
  $ make
  ```

  分かち書きしたテキストファイルを元にfasttextでモデルを作成する。

  ```
  $ ./fasttext skipgram -input ../wakati.txt -output fasttext_model -dim 100 
  ```

## 学習したモデルをPython+gensimで使用する。

  ```
  from gensim.models.wrappers.fasttext import FastText

  model = FastText.load_fasttext_format('fasttext_model')
  vector = model.wv["カバー"]
  word = model.most_similar([ vector ], [], 10)
  ```

## 類似語の抽出結果の例
  * カバーの類似語
  [('カバー', 1.0), ('トランスファー', 0.5716778039932251), ('覆う', 0.5670155882835388), ('インターロック', 0.5612574815750122), ('フタ', 0.5587755441665649), ('安全ピン', 0.5542986989021301), ('キズ', 0.5399497151374817), ('パッ', 0.5398361682891846), ('キン', 0.5317845344543457), ('スピンドル', 0.5294221639633179)]

  * フォークリフトの類似語
  [('フォークリフト', 0.9999998807907104), ('リング', 0.4963201880455017), ('トラクター', 0.45839279890060425), ('立てる', 0.40970373153686523), ('ポール', 0.3428553640842438), ('コンクリート', 0.3383992910385132), ('ブル', 0.333088219165802), ('乗り上げ', 0.3262328803539276), ('インター', 0.31960946321487427), ('ガード', 0.3148910403251648)]

  * ブルドーザーの類似語
  [('ブルドーザー', 1.0), ('機体', 0.45054271817207336), ('発破', 0.4374210834503174), ('ドラッグ', 0.4085504412651062), ('28m', 0.4040016531944275), ('0.7m', 0.40389499068260193), ('排土板', 0.403878390789032), ('小段', 0.40340861678123474), ('ポリエチレン', 0.3912505507469177), ('砂山', 0.390550822019577)]
